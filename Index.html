<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Math Learning Portal</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    background: #f5f5f5;
    margin: 0;
    padding: 0;
  }
  .page {
    display: none;
    padding: 20px;
  }
  .active {
    display: block;
  }
  button {
    background: #4CAF50;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
    margin: 5px;
  }
  input, textarea {
    width: 80%;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid #aaa;
    margin-top: 10px;
  }
  .chapter {
    background: white;
    border-radius: 10px;
    margin: 10px auto;
    padding: 15px;
    max-width: 400px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  }
</style>
</head>
<body>

<!-- PAGE 1: GET STARTED -->
<div id="start" class="page active">
  <h1>Welcome to Math Learning Portal</h1>
  <p>Enter your nickname to get started:</p>
  <input id="nickname" placeholder="Enter nickname..." />
  <button onclick="startApp()">Get Started</button>
  <p id="nickError" style="color:red;"></p>
</div>

<!-- PAGE 2: CHAPTERS -->
<div id="chapters" class="page">
  <h1>üìò Math's Chapters</h1>
  <div id="chapterList"></div>
</div>

<!-- PAGE 3: CHAPTER DETAIL -->
<div id="chapterPage" class="page">
  <h2 id="chapterTitle"></h2>
  <button onclick="showDoubtSolver()">Ask a Doubt ü§ñ</button>
  <button onclick="showPostQuestion()">Post Question ‚úèÔ∏è</button>
  <button onclick="goBack()">‚¨Ö Back</button>

  <div id="postQuestion" style="display:none;">
    <h3>Post a Question</h3>
    <textarea id="userQuestion" rows="4" placeholder="Type your question..."></textarea><br/>
    <button onclick="submitQuestion()">Submit</button>
    <div id="questionList"></div>
  </div>

  <div id="doubtSolver" style="display:none;">
    <h3>Ask Any Math or Concept Question</h3>
    <input id="doubtInput" placeholder="Type your doubt..." />
    <button onclick="getAnswer()">Get Answer</button>
    <p id="answer" style="background:white;border-radius:10px;padding:10px;margin-top:15px;"></p>
  </div>
</div>

<script>
let users = [];
let currentChapter = "";

const chapters = [
  "Rational Numbers", "Linear Equations in One Variable", "Understanding Quadrilaterals",
  "Data Handling", "Squares and Square Roots", "Cubes and Cube Roots",
  "Comparing Quantities", "Algebraic Expressions and Identities", "Mensuration",
  "Exponents and Powers", "Direct and Inverse Proportions", "Factorisation", "Introduction to Graphs"
];

function showPage(id) {
  document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

function startApp() {
  const nickname = document.getElementById("nickname").value.trim();
  if (!nickname) return document.getElementById("nickError").innerText = "Enter a nickname!";
  if (users.includes(nickname)) return document.getElementById("nickError").innerText = "Nickname already taken!";
  users.push(nickname);
  document.getElementById("nickError").innerText = "";
  renderChapters();
  showPage("chapters");
}

function renderChapters() {
  const container = document.getElementById("chapterList");
  container.innerHTML = "";
  chapters.forEach(ch => {
    const div = document.createElement("div");
    div.className = "chapter";
    div.innerHTML = `<strong>${ch}</strong><br><button onclick="openChapter('${ch}')">Open</button>`;
    container.appendChild(div);
  });
}

function openChapter(chapter) {
  currentChapter = chapter;
  document.getElementById("chapterTitle").innerText = chapter;
  showPage("chapterPage");
}

function goBack() {
  showPage("chapters");
  document.getElementById("doubtSolver").style.display = "none";
  document.getElementById("postQuestion").style.display = "none";
}

function showDoubtSolver() {
  document.getElementById("doubtSolver").style.display = "block";
  document.getElementById("postQuestion").style.display = "none";
}

function showPostQuestion() {
  document.getElementById("